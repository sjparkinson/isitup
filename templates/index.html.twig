{% extends "base.html.twig" %}

{% block body %}
    <div id="container">
        <noscript>
            <p class="warning">Please don't enter "http://" or a trailing slash, as you do not seem to be using
                javascript.</p>
            <p class="warning">For example type in <code>example.com</code> instead of <code>http://<u>example.com</u>/test/ing.html</code>
            </p>
        </noscript>

        <form method="get" action="/check" id="form">
            <p>is <input type="text" name="website" id="input" placeholder="{{ website }}" accesskey="4"/> <input
                        type="submit" id="submit" value="up?" accesskey="s"/></p>
        </form>
    </div>

    <script>
        let form = document.getElementById('form');
        
        // Listen in to the form submission
        form.addEventListener("submit", function () {
            // Retrieve the value from the input field
            let input = document.getElementById('input');
            let url = input.value;
            
            // Only if the url contains something we can submit
            if (url) {
                // Change the browser's url, adding only the domain
                window.location = "/" + url.replace(/^[ \s]+|[ \s]+$|http(s)?:\/\/|\/(.*)/g, "")
                    .toLowerCase();
            }
            
            // Do not submit if there is no input value
            input.setAttribute('placeholder', 'please enter a domain...');
            
            return false;
        });
    </script>
{% endblock %}
